(function(a){function b(){this.version="1.0.1"}b.prototype.args={searchEngine:["bing"],newTab:false,background:"#fff",zIndex:9999,};b.prototype.version="1.0.1";b.prototype.event=function(){var f=this;var d=f.args;var c=document.querySelectorAll(".selectedSearch");c=Array.prototype.slice.call(c);for(var e=0;e<c.length;e++){c[e].addEventListener("mouseover",function(h,g){if(h.target.classList[0]=="selectedSearch"){h.target.style.background="#f5f5f5"}});c[e].addEventListener("mouseout",function(g){if(g.target.classList[0]=="selectedSearch"){g.target.style.background="#fff"}});c[e].addEventListener("click",function(j){var k=j.target.attributes,h=k[1].value,g=k[2].value;var i=f.para;h=f.searchArr(h);h=h+encodeURI(g);if(d.newTab){location.href=h}else{window.open(h)}f.reSet()})}window.onscroll=function(){f.reSet()}};b.prototype.searchArr=function(f){f=f.toLowerCase();var c={google:"http://www.google.com/search?hl=zh-CN&q=",baidu:"http://www.baidu.com/s?wd=",bing:"http://cn.bing.com/search?q=",yahoo:"https://us.search.yahoo.com/search?p=",sougou:"http://www.sogou.com/sogou?query="};for(var d in c){if(d==f){f=c[d]}}return f};b.prototype.set=function(c){this.args=Object.assign({},this.args,c);this.mouseUp()};b.prototype.mouseUp=function(){var d=this;var c=d.args;var e=document.getElementsByTagName("body")[0];e.addEventListener("mouseup",function(l){var h=l.target;var p=null;var n=l.pageX;var m=l.pageY;if(window.getSelection()){p=window.getSelection();if(p.toString().length>0){d.reSet();var o=c.searchEngine,k="";for(var g in o){var r=o[g];(r!="")&&(k+="<div class='selectedSearch' _engine="+r+" title='"+p+"'>使用"+r+"搜索&nbsp;&nbsp;"+(p.toString().substr(0,10))+"</div>")}var f=document.createElement("div");f.classList.add("selected_div");f.innerHTML=k;document.querySelector("body").appendChild(f);if(!document.getElementsByClassName("selected_div")){return}var q=document.getElementsByClassName("selected_div")[0];for(var g=0;g<q.childNodes.length;g++){q.childNodes[g].style.cssText+="margin: 4px;padding: 4px;cursor: pointer;"}var j="position: absolute;left: "+n+"px;top: "+m+"px;color: "+c.color+";background: "+c.background+";border: 1px #ccc solid;border-radius: 4px;font-size: 13px;box-shadow: 1px 1px 2px 2px #ccc;z-index: "+c.zIndex+"";q.style.cssText+=j;d.init()}else{if(h.parentNode.classList[0]!=="selected_div"&&h.parentNode.classList[0]!=="selectedSearch"){d.reSet()}}}})};b.prototype.reSet=function(){var c=document.querySelector(".selected_div");c&&c.remove()};b.prototype.init=function(){this.event()};a.selected=new b()})(window);